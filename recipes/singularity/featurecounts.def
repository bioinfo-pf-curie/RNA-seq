Bootstrap: docker
From: conda/miniconda3-centos7

%labels
    gitUrl ssh://git@gitlab.curie.fr:2222/data-analysis/RNA-seq.git
    gitCommit bc28c568b4184a54d8245a025513ae53ee38d0dd / devel

%environment
    PATH=/usr/local/envs/featureCounts-2.0.1/bin:$PATH
    LC_ALL=en_US.utf-8
    LANG=en_US.utf-8

# real path from baseDir: featurecounts.yml
%files
    featurecounts.yml /opt/featurecounts.yml

%post
    yum install -y which   \
    && yum clean all \
    && conda env create -f /opt/featurecounts.yml \
    && echo "source activate featureCounts-2.0.1" > ~/.bashrc \
    && conda clean -a

